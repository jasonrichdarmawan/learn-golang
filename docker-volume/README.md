# Play with Docker

Use volumes for persisting data generated by and used by Docker containers.
```
$ docker create testvolume
```

Create image with Dockerfile and make directory owned by non-root user.

Dockerfile
```
RUN mkdir /secret-dir && chown 10001:10001 /secret-dir && chmod 750 /secret-dir

# -h --home DIR           Home directory
# -g --gecos GECOS        GECOS field
# -s --shell SHELL        Login shell named SHELL by example /bin/bash
# -D --disabled-password  Don't assign a password, so cannot login
# -H --no-create-home     Don't create home directory
# -G --ingroup GRP        Group (by name)
# -u --uid UID             User id
RUN adduser \
    -h "/dev/null" \
    -g "" \
    -s "/sbin/nologin" \
    -D \
    -H \
    -u 10001 \
    playerone
```

Build the image
```
$ docker build -t test .
```

Prevent containers from stopping immediately and mount the volume
```
// -i --interactive Keep STDIN open even if not attached
// -t --tty         Allocte a pseudo-TTY
// --rm             Automatically remove the container when it exits
// -v --volume volumeName:pathInTheContainer Bind mount a volume
$ docker run -it --rm -v testvolume:/secret-dir test
```

# Linux File Permissions

```
$ ls -l
total 60
drwxr-xr-x    2 root     root          4096 Aug  9 08:49 bin
```

File Types
```
- = Regular File
d = Directory
l = Symbolic Link
etc..
```

Change the owner and/or group of FILEs to USER and/or GRP
```
$ chown 10001:10001 FILE...
```

Permissions with octal number.
```
// r = 4
// w = 2
// x = 1
// 750  rwxr-x---
// 640  rw-r-----
$ chmod 750 DIRECTORY
$ chmod 640 FILE
```